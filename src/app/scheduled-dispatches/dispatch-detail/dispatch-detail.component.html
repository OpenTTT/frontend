<mat-card>
  <mat-card-title>Dispatch for timetable {{ dispatch?.timetable || '&lt;unknown&gt;' }}</mat-card-title>
  <div>
    A scheduled dispatch that repeats every
    <strong>{{ dispatch?.intervalInMinutes || 'âˆž' }}</strong>
    minutes
  </div>
  <div>
    Within that interval, it begins a new schedule at the following offsets:
    <ul>
      <li *ngFor="let departure of dispatch?.departures || []">
        <strong>{{ departure }}</strong> minutes
      </li>
    </ul>
    <small>Explanation: With a interval of 60 minutes and departures at offsets 0 and 30, the train would start at 00:00 and 00:30</small>
  </div>
</mat-card>

<div id="compact-timetable-schedule">
  <mat-card>
    <mat-card-title>Timetable</mat-card-title>
    <div id="timetable-table" *ngIf="dispatch; else timetableLoading">
      <div [ngSwitch]="editMode">
        <app-timetable-table [timetableId]="dispatch.timetableId"
                             *ngSwitchCase="false"
        ></app-timetable-table>
        <app-timetable-editor [timetableId]="dispatch.timetableId"
                              *ngSwitchCase="true">
        </app-timetable-editor>
      </div>
    </div>
    <ng-template #timetableLoading>
      The timetable is loading...
    </ng-template>

    <button mat-raised-button color="primary" (click)="toggleEditMode()"><mat-icon>edit</mat-icon> Edit</button>
  </mat-card>

  <mat-card>
    <mat-card-title>Schedule</mat-card-title>
    <div id="schedule-table" *ngIf="dispatch; else scheduleLoading;">

      <app-departure-table [numSchedules]="numberOfDeparturesDisplayed" [dispatchId]="id">
      </app-departure-table>

    </div>
    <ng-template #scheduleLoading>
      The schedule is loading...
    </ng-template>

    <div>
      Display # of departures:
      <input [(ngModel)]="numberOfDeparturesDisplayed"
             class="slim number"
             type="number" max="25" min="1"
             autofocus
      >
    </div>
  </mat-card>

</div>
